# greenhouse-team-admin

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![Built with Juno](https://cloudoperators.github.io/juno/built-with-juno.svg)](https://github.com/cloudoperators/juno)

This is the ui for the greenhouse team admin screen.

It comes with a [docker-compose](https://github.com/docker/compose) setup using the [greenhouse dev-env](https://github.com/cloudoperators/greenhouse-extensions/tree/main/dev-env) to provide a local mock backend, a.k.a. k8s apiserver + greenhouse manager.

From this folder run:

```
docker-compose up -d
```

Access the mock cluster via an autogenerated local kubeconfig:

```
export KUBECONFIG=./envtest/kubeconfig
kubectl get teams -n test-org
```

Locally we mock the `auth` data from the auth app, with `data-mock=true`. See [the local index.html](./public/index.html)
The token is scoped to the `test-org` organisation and the `test-team-1` and so are the resources mocked in the `dev-env`.

Set your local props from [secretProps.dev.json](./secretProps.dev.json):

```
cp ./secretProps.dev.json secretProps.json
```

so the mock `endpoint` is used.

Start your app:

```
npm run start
```

Frontend is exposed on [http://localhost:3000/](http://localhost:3000/)

## Linux users

To allow the docker containers full network access within f5 VPN you must activate `network_mode=host` on containers envtest and ui.

This is prepared by using [network-host.docker-compose.yaml](./network-host.docker-compose.yml) :

```
docker-compose -f network-host.docker-compose.yaml up -d
```
