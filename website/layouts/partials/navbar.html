<!--
  ~ Copyright 2024-2026 SAP SE or an SAP affiliate company and Greenhouse contributors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
-->

{{ $cover := and (.HasShortcode "blocks/cover") (not .Site.Params.ui.navbar_translucent_over_cover_disable) }}
<nav class="js-navbar-scroll {{ if $cover}} td-navbar-cover {{ end }} td-navbar">
    <div class="nav-header theme-dark">
        <a class="navbar-brand" href="{{ .Site.Home.RelPermalink }}">
            <span class="navbar-logo">{{ with resources.Get "icons/logo.svg" }}{{ ( . | minify ).Content | safeHTML }}{{ end }}</span>
            <span class="navbar-logo"></span><span>{{ .Site.Title }}</span>
        </a>
        <div class="nav-header-buttons">
            <a class="btn btn-ccloud" href="https://dashboard.greenhouse.global.cloud.sap">
                Go to Greenhouse
            </a>
        </div>
    </div>

    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
        <ul class="navbar-nav mt-2 mt-lg-0">
            {{ $p := . }}
            {{ range .Site.Menus.main }}
            <li class="nav-item mr-4 mb-2 mb-lg-0">
                {{ $active := or ($p.IsMenuCurrent "main" .) ($p.HasMenuCurrent "main" .) }}
                {{ with .Page }}
                {{ $active = or $active ( $.IsDescendant .)  }}
                {{ end }}
                {{ $pre := .Pre }}
                {{ $post := .Post }}
                {{ $url := urls.Parse .URL }}
                {{ $baseurl := urls.Parse $.Site.Params.Baseurl }}
                <a class="nav-link{{if $active }} active{{end}}" href="{{ with .Page }}{{ .RelPermalink }}{{ else }}{{ .URL | relLangURL }}{{ end }}" {{ if ne $url.Host $baseurl.Host }}target="_blank" {{ end }}>{{ with .Pre}}{{ $pre }}{{ end }}<span{{if $active }} class="active"{{end}}>{{ .Name }}</span>{{ with .Post}}{{ $post }}{{ end }}</a>
            </li>
            {{ end }}
            {{ if  .Site.Params.versions }}
            <li class="nav-item dropdown mr-4 d-none d-lg-block">
                {{ partial "navbar-version-selector.html" . }}
            </li>
            {{ end }}
            {{ if  (gt (len .Site.Home.Translations) 0) }}
            <li class="nav-item dropdown mr-4 d-none d-lg-block">
                {{ partial "navbar-lang-selector.html" . }}
            </li>
            {{ end }}
        </ul>
        <div class="navbar-search navbar-nav d-none d-lg-block">{{ partial "search-input.html" . }}</div>
    </div>
</nav>
